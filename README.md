# Cleverence
## Task 1
### Реализация
Решение включает в себя следующие файлы:
1. Archiver
2. FastArchiver
3. AssemblyInfo
4. Program
5. IArchiver

Archiver и FastArchiver реализуют интерфейс IArchiver, но одна из реализаций сделана с уклоном в читаемость кода, а другая в оптимизацию времени выполнения сжатия. Оптимизации заключались в применении агрессивного инлайна методов, попытках предсказывания Copasity строк и массивов, а также в чтении символов с минимальным использованием дополнительных строк. 

### Тестирование
В проекте представлен класс Program, который позволяет запустить наивный пример из условия. Также, для более детального тестирования работы, а также сравнения производительности методов, существует проект Task1.Test реализующий Unit тесты для данного задания. Список тестов реализован в классе ArchiverPerformanceTests.

## Task 2
### Реализация
Решение является бибилотекой классов и внем присутствует только один статический класс Server.

Для описаной задачи, с возможностью независимого чтения и только последовательной записи с блокировкой чтения, наилучшим образом подходит класс ReaderWriterLockSlim. В данном классе присутствует возможность устанавливать семафоры на чтение и запись,что и было реализовано в классе Server.cs
### Тестирование
Для Unit тестирования функций класса Server реализован проект Task2.Test. Тесты в том числе многопоточные.

## Task 3
### Реализация
Решение имеет следующую структуру:
- LineParsers/
  - ILineParser.cs | Интерфейс парсеров одной строки, различных форматов
  - BaseLineParser.cs | Общий функционал парсеров различных форматов, для минимизации дублирования кода
  - LineParserFormatWithMethod.cs | Реализация парсинга через Regex для формата с описанием методов
  - LineParserFormatWithoutMethod.cs | Реализация парсинга через Regex для формата без описания методов
- LogsExample/
  - input.txt
  - output.txt
  - problem.txt
- Models/
  - LogLevel.cs | Enum с разными уровнями логгирования
  - LogLine.cs | Общий класс для логов финального формата
- AssemblyInfo.cs
- LogFileParser.cs | Класс имеет поле IEnumerable<IParser> и автоматически парсит файл применяя парсеры строки из этого поля
- LogLevelParser.cs | Класс с маппингом различных вариаций написания уровня лога
- Program.cs | Класс реализует функционал получения сразу всех реализаций ILineParser через рефлексию (Также присутсвует макрос, который отключает рефликсию в пользу создания объектов парсеров по старинке, через перечисление их руками). На основании списка парсеров строк, создается парсер файла логов и происходит обработка файла input.txt

### Тестирование
Присутствует проект Task3.Test. Проект содержит классы для Unit тестирования работы как отдельных парсеров строк, так и общего парсера файла.
  
